<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Registration Inline Hook Reference | Okta Developer</title>
    <meta name="description" content="Secure, scalable, and highly available authentication and user management for any app.">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.2.5/polyfill.min.js"></script>
  <script src="https://static.cloud.coveo.com/searchui/v2.7219/js/CoveoJsSearch.Lazy.min.js" defer="true"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/manifest.json">
  <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg">
  <meta name="msapplication-config" content="/favicon/browserconfig.xml">
  <link rel="stylesheet" href="https://developer.okta.com/sites/all/themes/developer/css/master.css">
  <link rel="stylesheet" href="https://coveo-oktaweb.pantheonsite.io/sites/all/modules/okta_coveo_search_developer/css/okta_coveo_search_developer.css?q49ktf">
  <meta http-equiv="XA-UA-Compatible" content="IE=edge">
  <script>
      // TypeKit
        (function(d) {
          var config = {
            kitId: 'jff5neq',
            scriptTimeout: 3000,
            async: true
          },
          h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/bwf-loadingb/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
        })(document);

      var isProduction = window.location.hostname === 'developer.okta.com';
      if (isProduction) {

        // START Google Tag Manager
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-KXMLV58');
        // END Google Tag Manager

      }
    </script>
    
    <link rel="preload" href="/assets/css/0.styles.15a2bd63.css" as="style"><link rel="preload" href="/assets/js/app.1df7935f.js" as="script"><link rel="preload" href="/assets/js/11.71506886.js" as="script"><link rel="preload" href="/assets/js/2.8712a879.js" as="script"><link rel="preload" href="/assets/js/4.57ec015f.js" as="script"><link rel="preload" href="/assets/js/10.75e07b2c.js" as="script"><link rel="preload" href="/assets/js/34.6da36575.js" as="script"><link rel="preload" href="/assets/js/1206.e2f48ecc.js" as="script"><link rel="preload" href="/assets/js/36.17e5c6ae.js" as="script"><link rel="preload" href="/assets/js/5.93479991.js" as="script"><link rel="preload" href="/assets/js/1.952b7ece.js" as="script"><link rel="preload" href="/assets/js/31.3153d314.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.15a2bd63.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="PageWrap Page"><div><header class="Header is-fixed"><div class="Wrap"><a href="https://developer.okta.com" class="Logo"><svg version="1.1" id="OktaLogo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 431.9 151.4" style="enable-background:new 0 0 431.9 151.4;" xml:space="preserve"><g><g><g><path d="M102.2,41.4c-21,0-38.1,17.1-38.1,38.1s17.1,38.1,38.1,38.1s38.1-17.1,38.1-38.1l0,0C140.3,58.5,123.2,41.4,102.2,41.4z M102.2,98.5c-10.5,0-19-8.5-19-19s8.5-19,19-19s19,8.5,19,19c0.1,10.5-8.4,19-18.9,19.1C102.3,98.6,102.2,98.6,102.2,98.5L102.2,98.5z"/><path d="M169.1,92.3c0-1.9,1.5-3.4,3.4-3.4c0.9,0,1.8,0.4,2.4,1c9.5,9.7,25.3,26.3,25.4,26.4c0.4,0.5,0.8,0.8,1.4,0.9l1.6,0.2h17.2c1.8,0,3.3-1.4,3.4-3.2c0-0.8-0.3-1.5-0.8-2.2l-28.6-29.2l-1.5-1.5c-3.2-3.9-2.9-5.4,0.8-9.3l22.6-25.1c1.1-1.4,0.8-3.5-0.6-4.6c-0.6-0.4-1.3-0.7-2-0.7h-17c-0.6,0.2-1.1,0.5-1.5,0.9L175,64.4c-1.3,1.4-3.4,1.5-4.8,0.2c-0.7-0.6-1.1-1.5-1.1-2.5V18.9c0-1.7-1.3-3-3-3c-0.1,0-0.2,0-0.3,0h-12.7c-2.2,0-3.3,1.5-3.3,2.8v95.8c0,2.2,1.8,2.8,3.3,2.8h12.7c1.7,0.1,3.2-1.2,3.3-2.9c0,0,0,0,0,0V92.3z"/><path d="M273,114l-1.4-12.8c-0.2-1.7-1.7-2.9-3.4-2.7c0,0,0,0-0.1,0l-2.9,0.2c-10.1,0-18.5-7.9-19-18c0-0.3,0-0.7,0-1V64.2c-0.1-2,1.5-3.6,3.5-3.7c0,0,0,0,0,0h17c1.7-0.1,3.1-1.5,3-3.2c0,0,0-0.1,0-0.1v-12c0-2.3-1.5-3.6-2.8-3.6h-17.1c-1.9,0.1-3.5-1.5-3.6-3.4c0,0,0,0,0,0V18.9c-0.1-1.7-1.5-3.1-3.2-3c0,0-0.1,0-0.1,0h-12.7c-1.6-0.1-3,1.1-3.1,2.7c0,0.1,0,0.1,0,0.2c0,0,0,61.7,0,62c0.5,21,17.9,37.6,38.9,37c1.4,0,2.9-0.2,4.3-0.3C272,117.2,273.2,115.7,273,114z"/></g><path d="M364.7,98c-10.8,0-12.4-3.8-12.4-18.3l0,0V44.8c0-1.8-1.4-3.2-3.2-3.2c0,0-0.1,0-0.1,0h-12.8c-1.8,0-3.2,1.4-3.3,3.2v1.6C314.6,36,291.3,42.5,281,60.8c-10.4,18.3-3.9,41.6,14.4,51.9c14,7.9,31.4,6.2,43.5-4.2c3.6,5.5,9.3,9.1,18.3,9.1c1.5,0,9.7,0.3,9.7-3.5v-13.6C367,99.2,366,98.1,364.7,98z M314.2,98.6c-10.5,0-19-8.5-19-19s8.5-19,19-19s19,8.5,19,19l0,0C333.2,90.1,324.7,98.6,314.2,98.6z"/></g><path d="M19.4,74c2.2-1.9,4.1-4.1,5.7-6.6c3.5-5.3,5.4-11.5,5.2-17.9V27c0-4.9,0.9-8.4,2.7-10.5c1.8-2.1,4.8-3,9.2-3h12.6c1.2,0,2.1-0.9,2.2-2.1l0,0V2.2C57,1,56,0,54.8,0c0,0,0,0,0,0H41.5c-7.8,0-12.9,2.1-18,7.6s-7.1,12.3-7.1,21.7v14.2c0,2.2-0.1,4-0.2,5.7v2.2c-0.5,3.2-1.8,6.2-3.6,8.9C9.4,64.7,5.1,70.9,0.9,74l0,0l-0.3,0.3l0,0l-0.2,0.3H0.2v0.3l0,0c-0.1,0.3-0.1,0.7,0,1l0,0v0.3h0.1l0.2,0.3l0,0l0.3,0.3l0,0c4.2,3.1,8.5,9.3,11.3,13.7c1.8,2.7,3.1,5.7,3.6,8.9v2.2c0.1,1.6,0.2,3.5,0.2,5.7v14.3c0,9.4,2.4,16.7,7.1,21.7s10.2,7.6,18,7.6h13.8c1.2,0,2.2-1,2.2-2.2V140l0,0c0-1.2-1-2.2-2.2-2.2H42.2c-4.4,0-7.5-1-9.2-3s-2.7-5.6-2.7-10.5v-22.4c0.2-6.4-1.7-12.6-5.2-17.9c-1.6-2.5-3.5-4.7-5.7-6.6l0,0c-0.9-0.7-1.1-2-0.4-2.9C19.2,74.3,19.3,74.2,19.4,74L19.4,74z"/><path d="M412.5,74c-2.2-1.9-4.1-4.1-5.7-6.6c-3.5-5.3-5.4-11.5-5.2-17.9V27c0-4.9-0.9-8.4-2.7-10.5s-4.8-3-9.2-3h-12.6c-1.2,0-2.2-1-2.2-2.2c0,0,0,0,0,0l0,0V2.2c0-1.2,1-2.2,2.2-2.2c0,0,0,0,0,0h13.4c7.8,0,12.9,2.1,18,7.6s7.1,12.3,7.1,21.7v14.2c0,2.2,0.1,4,0.2,5.7v2.2c0.5,3.2,1.8,6.2,3.6,8.9c2.8,4.5,7.1,10.7,11.3,13.7l0,0l0.3,0.3l0,0l0.2,0.3h0.1v0.3l0,0c0.1,0.3,0.1,0.7,0,1l0,0v0.3h-0.1l-0.2,0.3l0,0l-0.3,0.3l0,0c-4.2,3.1-8.5,9.3-11.3,13.7c-1.8,2.7-3.1,5.7-3.6,8.9v2.2c-0.1,1.6-0.2,3.5-0.2,5.7v14.3c0,9.4-2.4,16.7-7.1,21.7s-10.2,7.6-18,7.6h-13.4c-1.2,0-2.2-1-2.2-2.2c0,0,0,0,0,0V140l0,0c0-1.2,1-2.2,2.2-2.2l0,0h12.7c4.4,0,7.5-1,9.2-3s2.7-5.6,2.7-10.5v-22.4c-0.2-6.3,1.6-12.6,5.1-17.9c1.6-2.5,3.5-4.7,5.7-6.6l0,0c0.9-0.7,1.1-2,0.4-2.9C412.7,74.3,412.6,74.2,412.5,74L412.5,74z"/></g></svg></a> <nav class="Header-nav PrimaryNav"><ul class="menu"><li class="first expanded"><a href="/product/">Product</a> <ul class="menu"><li class="first"><a href="/product/">Overview</a> <!----></li><li><a href="/product/authentication/">Authentication</a> <!----></li><li><a href="/product/authorization/">Authorization</a> <!----></li><li><a href="/product/user-management/">User Management</a> <!----></li></ul></li><li><a href="/pricing/">Pricing</a> <!----></li><li><a href="/blog/">Blog</a> <!----></li><li class="expanded active"><a href="/docs/">Docs</a> <ul class="menu"><li class="first"><a href="/docs/">Get Started</a> <!----></li><li><a href="/docs/concepts/">Concepts</a> <!----></li><li><a href="/docs/guides/">Guides</a> <!----></li><li><a href="/docs/reference/">Reference</a> <!----></li></ul></li><li class="expanded"><a href="">Support</a> <ul class="menu"><li class="first"><a href="https://devforum.okta.com/">Okta Developer Forums</a> <!----></li><li><a href="mailto:developers@okta.com">developers@okta.com</a> <!----></li></ul></li></ul> <a href="#" class="PrimaryNav-toggle"><svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round" class="MenuIcon"><path d="M1,16 L19,16" stroke="#FFFFFF" stroke-width="2" class="MenuIcon-line1"></path> <path d="M1,4 L19,4" stroke="#FFFFFF" stroke-width="2" class="MenuIcon-line2"></path> <path d="M1,10 L19,10" stroke="#FFFFFF" stroke-width="2" class="MenuIcon-line3"></path> <path d="M1,10 L19,10" stroke="#FFFFFF" stroke-width="2" class="MenuIcon-line4"></path></g></svg> <svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="CloseIcon"><g id="ALl-Boards" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Desktop" transform="translate(-915.000000, -235.000000)" fill="#FFFFFF"><g id="Search-bar-Active" transform="translate(30.000000, 26.000000)"><polygon id="Icon/Cross" points="901 210.6 899.4 209 893 215.4 886.6 209 885 210.6 891.4 217 885 223.4 886.6 225 893 218.6 899.4 225 901 223.4 894.6 217"></polygon></g></g></g></svg></a> <div class="PrimaryNav-cta"><a target="_blank" rel="noopener noreferrer" href="https://login.okta.com/" class="Button--redOutline">Login</a> <a href="https://developer.okta.com/signup/" class="Button--red">Sign up</a></div> <a data-search-toggle class="SearchIcon"></a></nav></div></header> <div data-search-bar class="SearchBar"><div class="Wrap"><div data-pipeline="developer-okta-com" class="SearchBox" style="display: flex;"><div class="CoveoOmnibox"></div> <div class="CoveoSearchButton">Search</div> <div class="CoveoAnalytics"></div></div></div></div></div> <!----> <section class="PageContent DynamicSidebar has-tableOfContents"><div class="Sidebar" data-v-705933f8><aside data-v-705933f8><h2 class="Sidebar-location Sidebar-toggle h6" data-v-705933f8>Navigation</h2> <div class="Sidebar-close Sidebar-toggle" data-v-705933f8></div> <div data-v-705933f8><div class="Sidebar-group" data-v-705933f8><h3 class="Sidebar-title" data-v-705933f8>Concepts</h3> <ul class="Sidebar-nav" data-v-705933f8><li data-v-705933f8><a href="/docs/concepts/api-access-management/" data-v-705933f8>API Access Management</a> <!----></li><li data-v-705933f8><a href="/docs/concepts/authentication/" data-v-705933f8>Authentication</a> <!----></li><li data-v-705933f8><a href="/docs/concepts/auth-servers/" data-v-705933f8>Authorization Servers</a> <!----></li><li data-v-705933f8><a href="/docs/concepts/event-hooks/" data-v-705933f8>Event Hooks</a> <!----></li><li data-v-705933f8><a href="/docs/concepts/events-api-migration/" data-v-705933f8>Events API Migration</a> <!----></li><li data-v-705933f8><a href="/docs/concepts/identity-providers/" data-v-705933f8>External Identity Providers</a> <!----></li><li data-v-705933f8><a href="/docs/concepts/feature-lifecycle-management/" data-v-705933f8>Feature Lifecycle Management</a> <!----></li><li data-v-705933f8><a href="/docs/concepts/inline-hooks/" data-v-705933f8>Inline Hooks</a> <!----></li><li data-v-705933f8><a href="/docs/concepts/key-rotation/" data-v-705933f8>Key Rotation</a> <!----></li><li data-v-705933f8><a href="/docs/concepts/auth-overview/" data-v-705933f8>OAuth 2.0 &amp; OIDC</a> <!----></li><li data-v-705933f8><a href="/docs/concepts/okta-hosted-flows/" data-v-705933f8>Okta-Hosted Flows</a> <!----></li><li data-v-705933f8><a href="/docs/concepts/okta-organizations/" data-v-705933f8>Okta Organizations</a> <!----></li><li data-v-705933f8><a href="/docs/concepts/saml/" data-v-705933f8>SAML</a> <!----></li><li data-v-705933f8><a href="/docs/concepts/scim/" data-v-705933f8>SCIM</a> <!----></li><li data-v-705933f8><a href="/docs/concepts/social-login/" data-v-705933f8>Social Login</a> <!----></li></ul></div><div class="Sidebar-group" data-v-705933f8><h3 class="Sidebar-title" data-v-705933f8>Guides</h3> <ul class="Sidebar-nav" data-v-705933f8><li data-v-705933f8><a href="/docs/guides/customize-tokens-returned-from-okta/" data-v-705933f8>Customize tokens returned from Okta</a> <!----></li><li data-v-705933f8><a href="/docs/guides/protect-your-api/" data-v-705933f8>Protect your API endpoints</a> <!----></li><li data-v-705933f8><a href="/docs/guides/request-user-consent/" data-v-705933f8>Request user consent during authentication</a> <!----></li><li data-v-705933f8><a href="/docs/guides/sign-into-web-app/" data-v-705933f8>Sign users in to your web application</a> <!----></li><li data-v-705933f8><a href="/docs/guides/sign-into-spa/" data-v-705933f8>Sign users in to your SPA</a> <!----></li><li data-v-705933f8><a href="/docs/guides/sign-users-out/" data-v-705933f8>Sign users out</a> <!----></li><li data-v-705933f8><a href="/docs/guides/" data-v-705933f8>More...</a> <!----></li></ul></div><div class="Sidebar-group" data-v-705933f8><h3 class="Sidebar-title" data-v-705933f8>Reference</h3> <ul class="Sidebar-nav" data-v-705933f8><li data-v-705933f8><a href="/docs/reference/api-overview/" data-v-705933f8>API Overview</a> <!----></li><li data-v-705933f8><a href="/docs/reference/api/oidc/" data-v-705933f8>Sign in Your Users</a> <!----></li><li data-v-705933f8><a href="/docs/reference/api/roles/" data-v-705933f8>Manage Okta Resources</a> <!----></li><li data-v-705933f8><a href="/docs/reference/error-codes/" data-v-705933f8>Error Codes</a> <!----></li><li data-v-705933f8><a href="/docs/reference/import-hook/" data-v-705933f8>Import Hook</a> <!----></li><li data-v-705933f8><a href="/docs/reference/saml-hook/" data-v-705933f8>SAML Hook</a> <!----></li><li class="is-active" data-v-705933f8><a href="/docs/reference/registration-hook/" data-v-705933f8>Registration Hook</a> <!----></li><li data-v-705933f8><a href="/docs/reference/token-hook/" data-v-705933f8>Token Hook</a> <!----></li><li data-v-705933f8><a href="/docs/reference/okta-expression-language/" data-v-705933f8>Okta Expression Language</a> <!----></li><li data-v-705933f8><a href="/docs/reference/postman-collections/" data-v-705933f8>Postman Collections</a> <!----></li><li data-v-705933f8><a href="/docs/reference/rate-limits/" data-v-705933f8>Rate Limits</a> <!----></li><li data-v-705933f8><a href="/docs/reference/releases-at-okta/" data-v-705933f8>Release Life Cycle</a> <!----></li><li data-v-705933f8><a href="/docs/reference/scim/" data-v-705933f8>SCIM Protocol</a> <!----></li><li data-v-705933f8><a href="/docs/reference/webfinger/" data-v-705933f8>WebFinger</a> <!----></li></ul></div><div class="Sidebar-group" data-v-705933f8><h3 class="Sidebar-title" data-v-705933f8>Release Notes</h3> <ul class="Sidebar-nav" data-v-705933f8><li data-v-705933f8><a href="/docs/release-notes/" data-v-705933f8>Okta API Products Release Notes</a> <!----></li></ul></div></div></aside></div> <div class="PageContent-main"><a id="edit-link" href="https://github.com/okta/okta-developer-docs/edit/master/packages/@okta/vuepress-site/docs/reference/registration-hook//index.md" target="_blank" rel="noopener noreferrer" data-proofer-ignore="">Edit Page</a> <div class="content__default"><h1>Registration Inline Hook Reference</h1> <a href="/docs/reference/releases-at-okta/"><!----> <span class="api-label api-label-ea"><i class="fa fa-flag"></i> Early Access </span> <!----></a> <p>This page provides reference documentation for:</p> <ul><li><p>JSON objects contained in the outbound request from Okta to your external service</p></li> <li><p>JSON objects you can include in your response</p></li></ul> <p>This information is specific to the Registration Inline Hook, one type of Inline Hook supported by Okta.</p> <h2 id="see-also">See Also <a href="#see-also" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h2> <p>For a general introduction to Okta Inline Hooks, see <a href="/docs/concepts/inline-hooks/">Inline Hooks</a>.</p> <p>For information on the API for registering external service endpoints with Okta, see <a href="/docs/reference/api/inline-hooks/">Inline Hooks Management API</a>.</p> <p>For steps to enable this Inline Hook, see below, <a href="#enabling-a-registration-inline-hook-for-self-service-registration">Enabling a Registration Inline Hook</a>.</p> <h2 id="about">About <a href="#about" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h2> <p>The Okta Registration Inline Hook allows you to integrate your own custom code into Okta's <a href="https://help.okta.com/en/prod/Content/Topics/Directory/eu-self-service.htm" target="_blank" rel="noopener noreferrer">Self-Service Registration<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> flow. The hook is triggered after Okta receives the registration request but before the user is created. Your custom code can:</p> <ul><li>Set or override the values that will be populated in attributes of the user's Okta profile</li> <li>Allow or deny the registration attempt, based on your own validation of the information the user has submitted</li></ul> <h2 id="objects-in-the-request-from-okta">Objects in the Request from Okta <a href="#objects-in-the-request-from-okta" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h2> <p>The outbound call from Okta to your external service includes the following objects in its JSON payload:</p> <h3 id="data-userprofile">data.userProfile <a href="#data-userprofile" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h3> <p>This object contains name-value pairs for each attribute supplied by the user in the Self-Service Registration form, except for the following:</p> <ul><li>the <code>password</code> field</li> <li>any fields corresponding to user profile attributes marked as sensitive in your Okta user schema</li></ul> <p>Using the <code>com.okta.user.profile.update</code> commands you send in your response, you can modify the values of the attributes, or add other attributes, before the values are assigned to the Okta user profile that will be created for the registering user.</p> <p>You can only set values for profile fields which already exist in your Okta user profile schema: Registration Inline Hook functionality can only set values; it cannot create new fields.</p> <h3 id="data-action">data.action <a href="#data-action" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h3> <p>The action that Okta is currently set to take, regarding whether to allow this registration attempt.</p> <p>There are two possible values:</p> <ul><li><code>ALLOW</code> indicates that the registration attempt will be allowed to proceed</li> <li><code>DENY</code> indicates that the registration attempt will be terminated (no user will be created in Okta)</li></ul> <p>The action is <code>ALLOW</code> by default (in practice, <code>DENY</code> will never be sent to your external service).</p> <p>Using the <code>com.okta.action.update</code> <a href="#supported-commands">command</a> in your response, you can change the action that Okta will take.</p> <h2 id="objects-in-response-you-send">Objects in Response You Send <a href="#objects-in-response-you-send" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h2> <p>The objects that you can return in the JSON payload of your response are an array of one or more <code>commands</code>, to be executed by Okta, or an <code>error</code> object, to indicate problems with the registration request. These objects are defined as follows:</p> <h3 id="commands">commands <a href="#commands" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h3> <p>The <code>commands</code> object lets you invoke commands to modify or add values to the attributes in the Okta user profile that will be created for this user, as well as to control whether or not the registration attempt is allowed to proceed.</p> <p>This object is an array, allowing you to send multiple commands in your response. Each array element requires a <code>type</code> property and a <code>value</code> property. The <code>type</code> property is where you specify which of the supported commands you wish to execute, and <code>value</code> is where you supply parameters for that command.</p> <table><thead><tr><th>Property</th> <th>Description</th> <th>Data Type</th></tr></thead> <tbody><tr><td>type</td> <td>One of the <a href="#supported-commands">supported commands</a>.</td> <td>String</td></tr> <tr><td>value</td> <td>Operand to pass to the command.</td> <td><a href="#value">value</a></td></tr></tbody></table> <p>For example commands, see the <a href="#value">value</a> section below.</p> <h4 id="supported-commands">Supported Commands <a href="#supported-commands" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h4> <p>The following commands are supported for the Registration Inline Hook type:</p> <table><thead><tr><th>Command</th> <th>Description</th></tr></thead> <tbody><tr><td>com.okta.user.profile.update</td> <td>Change values of attributes in the user's Okta user profile.</td></tr> <tr><td>com.okta.action.update</td> <td>Allow or deny the user's registration.</td></tr></tbody></table> <p>To set attributes in the user's Okta profile, supply a type property set to <code>com.okta.user.profile.update</code>, together with a <code>value</code> property set to a list of key-value pairs corresponding to the Okta user profile attributes you want to set. The attributes must already exist in your user profile schema.</p> <p>To explicitly allow or deny registration to the user, supply a type property set to <code>com.okta.action.update</code>, together with a value property set to <code>{&quot;registration&quot;: &quot;ALLOW&quot;}</code> or <code>{&quot;registration&quot;: &quot;DENY&quot;}</code>. The default is to allow registration.</p> <p>Commands are applied in the order in which they appear in the array. Within a single <code>com.okta.user.profile.update</code> command, attributes are updated in the order in which they appear in the <code>value</code> object.</p> <p>You can never use a command to update the user's password, but you are allowed to set the values of attributes other than password that are designated sensitive in your Okta user schema. Note, however, that the values of those sensistive attributes, if included as fields in the Self-Service Registration form, are not included in the <code>data.userProfile</code> object sent to your external service by Okta. See <a href="#data-userProfile">data.userProfile</a> above.</p> <h4 id="value">value <a href="#value" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h4> <p>The <code>value</code> object is the parameter to pass to the command.</p> <p>For <code>com.okta.user.profile.update</code> commands, <code>value</code> should be an object containing one or more name-value pairs for the attributes you wish to update, for example:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;com.okta.user.profile.update&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token property">&quot;middleName&quot;</span><span class="token operator">:</span><span class="token string">&quot;Danger&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;customerId&quot;</span><span class="token operator">:</span><span class="token number">12345</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The above example assumes that there is an attribute <code>customerId</code> defined in your Okta user schema (<code>middleName</code> is defined by default).</p> <p>The same result could also be accomplished by means of two separate <code>com.okta.user.profile.update</code> commands, as follows:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;com.okta.user.profile.update&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token property">&quot;middleName&quot;</span><span class="token operator">:</span><span class="token string">&quot;Danger&quot;</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;com.okta.user.profile.update&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token property">&quot;customerId&quot;</span><span class="token operator">:</span><span class="token number">12345</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>For <code>com.okta.action.update</code> commands, <code>value</code> should be an object containing the attribute <code>action</code> set to a value of either <code>ALLOW</code> or <code>DENY</code>, indicating whether the registration should be permitted or not, for example:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;com.okta.action.update&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token property">&quot;registration&quot;</span><span class="token operator">:</span><span class="token string">&quot;DENY&quot;</span><span class="token punctuation">,</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Registrations are allowed by default, so setting a value of <code>ALLOW</code> for the <code>action</code> field is valid but superfluous.</p> <h3 id="error">error <a href="#error" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h3> <p>See <a href="/docs/concepts/inline-hooks/">error</a> for general information on the structure to use for the <code>error</code> object.</p> <p>In the case of the Registration Inline Hook, the <code>error</code> object provides a way of displaying an error message to the end user who is trying to register. If you're using the Okta Sign-In Widget for Self-Service Registration, and have not customized its error handling behavior, only the <code>errorSummary</code> of the first <code>ErrorCause</code> object that your external service returns is displayed to the end user.</p> <p>If you do not return any value for that <code>errorCauses</code> object, but deny the user's registration attempt via the <code>commands</code> object in your response to Okta, the following generic message is displayed to the end user: &quot;Registration cannot be completed at this time&quot;.</p> <blockquote><p><strong>Note:</strong> If you include an error object in your response, no commands will be executed and the registration will fail. This holds true even if the top-level <code>errorSummary</code> and the <code>errorCauses</code> objects are omitted.</p></blockquote> <h2 id="sample-json-payload-of-request">Sample JSON Payload of Request <a href="#sample-json-payload-of-request" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h2> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;eventId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GOsk4z6tSSeZo6X08MvKaw&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;eventTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-08-27T18:07:24.000Z&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;eventType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;com.okta.user.pre-registration&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;eventTypeVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;contentType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;cloudEventVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;source&quot;</span><span class="token operator">:</span> <span class="token string">&quot;reghawlks3zOkRrau0h7&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;context&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;XWVxW2zcaH5-Ii74OsI6CgAACJw&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/api/v1/registration/reghawlks3zOkRrau0h7/register&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ipAddress&quot;</span><span class="token operator">:</span> <span class="token string">&quot;98.124.153.138&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;userProfile&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;lastName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Doe&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;firstName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;login&quot;</span><span class="token operator">:</span> <span class="token string">&quot;john.doe@example.com&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;john.doe@example.com&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;action&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="sample-json-payload-of-response">Sample JSON Payload of Response <a href="#sample-json-payload-of-response" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h2> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;com.okta.action.update&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token property">&quot;registration&quot;</span><span class="token operator">:</span><span class="token string">&quot;DENY&quot;</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;error&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;errorSummary&quot;</span><span class="token operator">:</span><span class="token string">&quot;Errors were found in the user profile&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;errorCauses&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
         <span class="token punctuation">{</span>
            <span class="token property">&quot;errorSummary&quot;</span><span class="token operator">:</span><span class="token string">&quot;You specified an invalid email domain&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;reason&quot;</span><span class="token operator">:</span><span class="token string">&quot;INVALID_EMAIL_DOMAIN&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;locationType&quot;</span><span class="token operator">:</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;location&quot;</span><span class="token operator">:</span><span class="token string">&quot;data.userProfile.login&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;domain&quot;</span><span class="token operator">:</span><span class="token string">&quot;end-user&quot;</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="enabling-a-registration-inline-hook-for-self-service-registration">Enabling a Registration Inline Hook for Self-Service Registration <a href="#enabling-a-registration-inline-hook-for-self-service-registration" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h2> <p>To activate the Inline Hook, you first need to register your external service endpoint with Okta; see <a href="/docs/concepts/inline-hooks/#inline-hooks_setup">Inline Hook Setup</a>.</p> <p>You then need to associate the registered Inline Hook with your Self-Service Registration policy. (For information on configuring a Self-Service Registration policy, see <a href="https://help.okta.com/en/prod/Content/Topics/Directory/eu-self-service.htm" target="_blank" rel="noopener noreferrer">Enable self-service registration<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.)</p> <ol><li><p>Go to <strong>Directory &gt; Self-Service Registration</strong>.</p></li> <li><p>Click <strong>Edit</strong>.</p></li> <li><p>Select your hook from the <strong>Extension</strong> dropdown. If you have created multiple Registration Inline Hooks, you should see all of them displayed here.</p></li> <li><p>Click <strong>Save</strong>.</p></li></ol> <p>Your Registration Inline Hook is now configured.</p> <blockquote><p><strong>Note:</strong> Only one Inline Hook can be associated with your Self-Service Registration policy at a time.</p></blockquote></div></div> <div class="TableOfContents TableOfContents" style="bottom:0px;top:100px;" data-v-4ef83c5f><div class="TableOfContents-item is-level1" data-v-4ef83c5f>
    Registration Inline Hook Reference
  </div> <!----> <div data-v-4ef83c5f><div class="TableOfContents-indicator" style="height:30px;transform:translate(0px, 0px);" data-v-4ef83c5f></div> <a href="#see-also" class="TableOfContents-item sidebar-link is-level2" style="display:undefined;" data-v-4ef83c5f>
      See Also
    </a><a href="#about" class="TableOfContents-item sidebar-link is-level2" style="display:undefined;" data-v-4ef83c5f>
      About
    </a><a href="#objects-in-the-request-from-okta" class="TableOfContents-item sidebar-link is-level2" style="display:undefined;" data-v-4ef83c5f>
      Objects in the Request from Okta
    </a><a href="#data-userprofile" class="TableOfContents-item sidebar-link is-level3" style="display:undefined;" data-v-4ef83c5f>
      data.userProfile
    </a><a href="#data-action" class="TableOfContents-item sidebar-link is-level3" style="display:undefined;" data-v-4ef83c5f>
      data.action
    </a><a href="#objects-in-response-you-send" class="TableOfContents-item sidebar-link is-level2" style="display:undefined;" data-v-4ef83c5f>
      Objects in Response You Send
    </a><a href="#commands" class="TableOfContents-item sidebar-link is-level3" style="display:undefined;" data-v-4ef83c5f>
      commands
    </a><a href="#supported-commands" class="TableOfContents-item sidebar-link is-level4" style="display:undefined;" data-v-4ef83c5f>
      Supported Commands
    </a><a href="#value" class="TableOfContents-item sidebar-link is-level4" style="display:undefined;" data-v-4ef83c5f>
      value
    </a><a href="#error" class="TableOfContents-item sidebar-link is-level3" style="display:undefined;" data-v-4ef83c5f>
      error
    </a><a href="#sample-json-payload-of-request" class="TableOfContents-item sidebar-link is-level2" style="display:undefined;" data-v-4ef83c5f>
      Sample JSON Payload of Request
    </a><a href="#sample-json-payload-of-response" class="TableOfContents-item sidebar-link is-level2" style="display:undefined;" data-v-4ef83c5f>
      Sample JSON Payload of Response
    </a><a href="#enabling-a-registration-inline-hook-for-self-service-registration" class="TableOfContents-item sidebar-link is-level2" style="display:undefined;" data-v-4ef83c5f>
      Enabling a Registration Inline Hook for Self-Service Registration
    </a> <div class="TableOfContents-footer" data-v-4ef83c5f><a href="#" data-v-4ef83c5f>Top of Page</a></div></div></div></section> <footer class="Footer"><div class="Wrap"><div class="Row"><div class="Column--3 Column--medium-6 Column--xSmall-12"><a href="https://www.okta.com/" target="_blank" rel="noopener noreferrer"><div class="Logo"><img src="https://developer.okta.com/sites/all/themes/developer/images/logo-footer.png" alt="Okta"></div> <p>Visit okta.com</p></a></div> <div class="Column--3 Column--medium-12 Column--xSmall-12"><h4>Social</h4> <ul class="Footer-links"><li class="first"><a href="http://github.com/oktadeveloper" target="_blank" class="Footer-links--github">GitHub</a> <!----></li><li><a href="http://twitter.com/OktaDev" target="_blank" class="Footer-links--twitter">Twitter</a> <!----></li><li><a href="https://devforum.okta.com/" target="_blank" class="Footer-links--forum">Forum</a> <!----></li><li><a href="http://feeds.feedburner.com/OktaBlog" target="_blank" class="Footer-links--rss">RSS Blog</a> <!----></li><li><a href="https://www.youtube.com/channel/UC5AMiWqFVFxF1q9Ya1FuZ_Q/featured" target="_blank" class="Footer-links--youtube">YouTube</a> <!----></li></ul></div><div class="Column--3 Column--medium-12 Column--xSmall-12"><h4>More Info</h4> <ul class="Footer-links"><li class="first"><a href="https://developer.okta.com/integrate-with-okta/">Integrate With Okta</a> <!----></li><li><a href="https://developer.okta.com/blog/">Blog</a> <!----></li><li><a href="https://developer.okta.com/docs/release-notes/">Release Notes</a> <!----></li><li><a href="https://developer.okta.com/3rd_party_notices/">3rd Party Notices</a> <!----></li><li><a href="https://toolkit.okta.com/">Community Toolkit</a> <!----></li></ul></div><div class="Column--3 Column--medium-12 Column--xSmall-12"><h4>Contact & Legal</h4> <ul class="Footer-links"><li class="first"><a href="https://developer.okta.com/contact/">Contact Our Team</a> <!----></li><li><a href="https://developer.okta.com/contact-sales-enterprise/">Contact Sales</a> <!----></li><li><a href="mailto:developers@okta.com">Contact Support</a> <!----></li><li><a href="https://developer.okta.com/terms/">Terms &amp; Conditions</a> <!----></li><li><a href="https://developer.okta.com/privacy/">Privacy Policy</a> <!----></li></ul></div></div></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1df7935f.js" defer></script><script src="/assets/js/11.71506886.js" defer></script><script src="/assets/js/2.8712a879.js" defer></script><script src="/assets/js/4.57ec015f.js" defer></script><script src="/assets/js/10.75e07b2c.js" defer></script><script src="/assets/js/34.6da36575.js" defer></script><script src="/assets/js/1206.e2f48ecc.js" defer></script><script src="/assets/js/36.17e5c6ae.js" defer></script><script src="/assets/js/5.93479991.js" defer></script><script src="/assets/js/1.952b7ece.js" defer></script><script src="/assets/js/31.3153d314.js" defer></script>
  </body>
</html>
