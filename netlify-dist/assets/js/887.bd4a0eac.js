(window.webpackJsonp=window.webpackJsonp||[]).push([[887],{629:function(e,t,o){"use strict";o.r(t);var r=o(8),a=Object(r.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("p",[e._v("To get a refresh token, you send a request to your Okta Authorization Server.")]),e._v(" "),o("p",[e._v("The only flows that support Refresh tokens are the resource owner password flow, and the authorization code flow. This means that the following combinations of grant type and scope, when sent to "),o("code",[e._v("/token")]),e._v(" endpoint, will return a refresh token:")]),e._v(" "),o("table",[o("thead",[o("tr",[o("th",[e._v("Grant Type")]),e._v(" "),o("th",[e._v("Scope")])])]),e._v(" "),o("tbody",[o("tr",[o("td",[o("code",[e._v("authorization_code")])]),e._v(" "),o("td",[o("code",[e._v("offline_access")]),e._v(" (see Note)")])]),e._v(" "),o("tr",[o("td",[o("code",[e._v("refresh_token")])]),e._v(" "),o("td",[o("code",[e._v("offline_access")])])]),e._v(" "),o("tr",[o("td",[o("code",[e._v("password")])]),e._v(" "),o("td",[o("code",[e._v("offline_access")])])])])]),e._v(" "),o("blockquote",[o("p",[o("strong",[e._v("Note:")]),e._v(" The authorization code flow is unique, in that the "),o("code",[e._v("offline_access")]),e._v(" scope has to be requested as part of the code request to the "),o("code",[e._v("/authorize")]),e._v(" endpoint, and not the request sent to the "),o("code",[e._v("/token")]),e._v(" endpoint.")])]),e._v(" "),o("h3",{attrs:{id:"get-a-refresh-token-with-the-code-flow"}},[e._v("Get a Refresh Token with the Code Flow "),o("a",{staticClass:"header-anchor header-link",attrs:{href:"#get-a-refresh-token-with-the-code-flow","aria-hidden":"true"}},[o("i",{staticClass:"fa fa-link"})])]),e._v(" "),o("p",[e._v("In the case of the Authorization Code flow, you use the Authorization Server's "),o("code",[e._v("/authorize")]),e._v(" endpoint to get an authorization code, specifying an "),o("code",[e._v("offline_access")]),e._v(" scope. You then send this code to the "),o("code",[e._v("/token")]),e._v(" endpoint to get an access token and a refresh token.")]),e._v(" "),o("blockquote",[o("p",[o("strong",[e._v("Note:")]),e._v("  Authorization code with PKCE requests will not return refresh tokens if they are sent from SPAs or other browser-based apps.")])]),e._v(" "),o("p",[e._v("For more information about this endpoint, see "),o("router-link",{attrs:{to:"/docs/reference/api/oidc/#authorize"}},[e._v("Obtain an Authorization Grant from a User")]),e._v(". For more information about the Authorization Code flow, see "),o("router-link",{attrs:{to:"/docs/guides/implement-auth-code/"}},[e._v("Implementing the Authorization Code Flow")]),e._v(".")],1),e._v(" "),o("h3",{attrs:{id:"get-a-refresh-token-with-the-resource-owner-password-flow"}},[e._v("Get a Refresh Token with the Resource Owner Password Flow "),o("a",{staticClass:"header-anchor header-link",attrs:{href:"#get-a-refresh-token-with-the-resource-owner-password-flow","aria-hidden":"true"}},[o("i",{staticClass:"fa fa-link"})])]),e._v(" "),o("p",[e._v("For the Resource Owner Password flow, you use the Authorization Server's "),o("code",[e._v("/token")]),e._v(" endpoint directly.")]),e._v(" "),o("p",[e._v("For more information about this endpoint, see "),o("router-link",{attrs:{to:"/docs/reference/api/oidc/#token"}},[e._v("Request a Token")]),e._v(". For more information about the Resource Owner Password flow, see "),o("router-link",{attrs:{to:"/docs/guides/implement-password/"}},[e._v("Implementing the Resource Owner Password Flow")]),e._v(".")],1),e._v(" "),o("p",[e._v("For example, with the "),o("code",[e._v("password")]),e._v(" grant type you can include an "),o("code",[e._v("openid")]),e._v(" scope alongside the "),o("code",[e._v("offline_access")]),e._v(" scope:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("POST https://${yourOktaDomain}/oauth2/default/v1/token\n\ngrant_type=password\n &redirect_uri=http%3A%2F%2Flocalhost%3A8080\n &username=example%40mailinator.com\n &password=a.gReAt.pasSword\n &scope=openid%20offline_access\n")])])]),o("p",[e._v("You would then get back an ID token alongside your access and refresh tokens.")]),e._v(" "),o("p",[e._v("For more information see the "),o("router-link",{attrs:{to:"/docs/reference/api/oidc/#response-properties"}},[e._v("Okta OAuth 2.0 reference page")]),e._v(".")],1),e._v(" "),o("h2",{attrs:{id:"get-a-refresh-token-silently-for-your-spa"}},[e._v("Get a Refresh Token Silently for Your SPA "),o("a",{staticClass:"header-anchor header-link",attrs:{href:"#get-a-refresh-token-silently-for-your-spa","aria-hidden":"true"}},[o("i",{staticClass:"fa fa-link"})])]),e._v(" "),o("p",[e._v("In a normal Single-Page Application (SPA) it is usually undesirable to redirect the user to a login page during normal navigation. For example, a user could request access to a resource, prompting your SPA to send a request to the Okta "),o("code",[e._v("/authorize")]),e._v(" endpoint. Normally, if a user does not have a valid session, this request will result in a redirection to a login page. To avoid this disruptive redirection, the endpoint allows for a request parameter called "),o("code",[e._v("prompt")]),e._v(". If the value of the "),o("code",[e._v("prompt")]),e._v(" parameter is "),o("code",[e._v("none")]),e._v(", this guarantees that the user will not be prompted to login, regardless of whether they have an active session or not. Instead, your application will either silently obtain the requested tokens or an OAuth error response. How to act on the error is up to you.")]),e._v(" "),o("p",[e._v("For more information on the "),o("code",[e._v("/authorize")]),e._v(" endpoint, see the "),o("router-link",{attrs:{to:"/docs/reference/api/oidc/#authorize"}},[e._v("Authentication Request section of the OIDC Reference")]),e._v(".")],1),e._v(" "),o("NextSectionLink")],1)}),[],!1,null,null,null);t.default=a.exports}}]);