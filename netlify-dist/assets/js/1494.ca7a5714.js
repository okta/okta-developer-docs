(window.webpackJsonp=window.webpackJsonp||[]).push([[1494],{1149:function(t,a,s){"use strict";s.r(a);var e=s(8),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"okta-java-spring-quickstart"}},[t._v("Okta Java/Spring Quickstart "),s("a",{staticClass:"header-anchor header-link",attrs:{href:"#okta-java-spring-quickstart","aria-hidden":"true"}},[s("i",{staticClass:"fa fa-link"})])]),t._v(" "),s("p",[t._v("Now that your users can sign in, let's add authentication to your server. We'll show you how to add the Okta Spring Boot library to your Spring app.")]),t._v(" "),s("blockquote",[s("p",[t._v("If you would prefer to download a complete sample application instead, please visit "),s("a",{attrs:{href:"https://github.com/okta/samples-java-spring",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring Sample Applications for Okta"),s("OutboundLink")],1),t._v(" and follow those instructions.")])]),t._v(" "),s("h3",{attrs:{id:"include-the-dependency"}},[t._v("Include the dependency "),s("a",{staticClass:"header-anchor header-link",attrs:{href:"#include-the-dependency","aria-hidden":"true"}},[s("i",{staticClass:"fa fa-link"})])]),t._v(" "),s("p",[t._v("For Apache Maven:")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.okta.spring"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("okta-spring-boot-starter"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.3.0"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("For Gradle:")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[t._v("compile "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.okta.spring:okta-spring-boot-starter:1.3.0'")]),t._v("\n")])])]),s("h3",{attrs:{id:"configure-your-properties"}},[t._v("Configure your properties "),s("a",{staticClass:"header-anchor header-link",attrs:{href:"#configure-your-properties","aria-hidden":"true"}},[s("i",{staticClass:"fa fa-link"})])]),t._v(" "),s("p",[t._v("You can configure your applications properties with environment variables, system properties, or configuration files. Take a look at the "),s("a",{attrs:{href:"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring Boot documentation"),s("OutboundLink")],1),t._v(" for more details.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Property")]),t._v(" "),s("th",[t._v("Default")]),t._v(" "),s("th",[t._v("Details")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("okta.oauth2.issuer")]),t._v(" "),s("td",[t._v("N/A")]),t._v(" "),s("td",[s("router-link",{attrs:{to:"/docs/guides/customize-authz-server/"}},[t._v("Authorization Server")]),t._v(" issuer URL, i.e.: "),s("code",[t._v("https://${yourOktaDomain}/oauth2/default")]),t._v(". Note that your Okta domain does "),s("strong",[t._v("not")]),t._v(" include "),s("code",[t._v("-admin")]),t._v(".")],1)]),t._v(" "),s("tr",[s("td",[t._v("okta.oauth2.clientId")]),t._v(" "),s("td",[t._v("N/A")]),t._v(" "),s("td",[t._v("The Client Id of your Okta OIDC application")])]),t._v(" "),s("tr",[s("td",[t._v("okta.oauth2.audience")]),t._v(" "),s("td",[t._v("api://default")]),t._v(" "),s("td",[t._v("The audience of your "),s("router-link",{attrs:{to:"/docs/guides/customize-authz-server/"}},[t._v("Authorization Server")])],1)]),t._v(" "),s("tr",[s("td",[t._v("okta.oauth2.groups-claim")]),t._v(" "),s("td",[t._v("groups")]),t._v(" "),s("td",[t._v("The claim key in the Access Token's JWT that corresponds to an array of the users groups.")])])])]),t._v(" "),s("h3",{attrs:{id:"create-a-controller"}},[t._v("Create a Controller "),s("a",{staticClass:"header-anchor header-link",attrs:{href:"#create-a-controller","aria-hidden":"true"}},[s("i",{staticClass:"fa fa-link"})])]),t._v(" "),s("p",[t._v("The above client makes a request to "),s("code",[t._v("/api/messages")]),t._v(", we simply need to create a "),s("code",[t._v("Controller")]),t._v(" to handle the response:")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessagesRestController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/messages"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Principal")]),t._v(" principal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// handle request")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"customize-the-configuration-optional"}},[t._v("Customize the configuration (optional) "),s("a",{staticClass:"header-anchor header-link",attrs:{href:"#customize-the-configuration-optional","aria-hidden":"true"}},[s("i",{staticClass:"fa fa-link"})])]),t._v(" "),s("p",[t._v("The OAuth 2.0 behavior can be customized the same way as using Spring Security directly:")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OktaOAuth2WebSecurityConfigurerAdapter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebSecurityConfigurerAdapter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpSecurity")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("oauth2ResourceServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("jwt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"that-s-it"}},[t._v("That's it! "),s("a",{staticClass:"header-anchor header-link",attrs:{href:"#that-s-it","aria-hidden":"true"}},[s("i",{staticClass:"fa fa-link"})])]),t._v(" "),s("p",[t._v("Okta's Spring Security integration will "),s("a",{attrs:{href:"/blog/2017/06/21/what-the-heck-is-oauth#oauth-flows"}},[t._v("parse the JWT access token")]),t._v(" from the HTTP request's "),s("code",[t._v("Authorization: Bearer")]),t._v(" header value.")]),t._v(" "),s("p",[t._v("Check out a "),s("a",{attrs:{href:"https://github.com/okta/okta-spring-boot/tree/master/examples",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring Boot example"),s("OutboundLink")],1),t._v(" or this "),s("a",{attrs:{href:"/blog/2017/09/19/build-a-secure-notes-application-with-kotlin-typescript-and-okta"}},[t._v("blog post")]),t._v(".")])])}),[],!1,null,null,null);a.default=n.exports}}]);