(window.webpackJsonp=window.webpackJsonp||[]).push([[791],{536:function(t,s,e){"use strict";e.r(s);var a=e(8),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("Add a Groups custom claim for an ID token or access token in a Custom Authorization Server. The maximum number of Groups specified must be less than 100. For the following example, we are adding a custom claim for an access token.")]),t._v(" "),e("ol",[e("li",[t._v("In the Admin Console, from the "),e("strong",[t._v("Security")]),t._v(" menu, select "),e("strong",[t._v("API")]),t._v(", and then select the authorization server that you want to configure.")]),t._v(" "),e("li",[t._v("Navigate to the "),e("strong",[t._v("Claims")]),t._v(" tab and click "),e("strong",[t._v("Add Claim")]),t._v(".")]),t._v(" "),e("li",[t._v("Enter a name for the claim. For this example, name it "),e("strong",[t._v("groups")]),t._v(".")]),t._v(" "),e("li",[t._v("In the "),e("strong",[t._v("Include in token type")]),t._v(" section, leave "),e("strong",[t._v("Access Token")]),t._v(" selected.")]),t._v(" "),e("li",[t._v("Leave "),e("strong",[t._v("Expression")]),t._v(" as the "),e("strong",[t._v("Value type")]),t._v(".")]),t._v(" "),e("li",[t._v("Enter the following expression as the "),e("strong",[t._v("Value")]),t._v(": "),e("code",[t._v('getFilteredGroups(app.profile.groupwhitelist, "group.name", 40)')])]),t._v(" "),e("li",[t._v("Click "),e("strong",[t._v("Create")]),t._v(".")]),t._v(" "),e("li",[t._v("Select the "),e("strong",[t._v("Scopes")]),t._v(" tab and click "),e("strong",[t._v("Add Scope")]),t._v(".")]),t._v(" "),e("li",[t._v("Add "),e("strong",[t._v("groups")]),t._v(" as the scope "),e("strong",[t._v("Name")]),t._v(" and "),e("strong",[t._v("DisplayName")]),t._v(", and then select the "),e("strong",[t._v("Metadata")]),t._v(" check box.")]),t._v(" "),e("li",[t._v("Click "),e("strong",[t._v("Create")]),t._v(".")])]),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("Note:")]),t._v(" Be sure that you have a policy and rule set up in your Custom Authorization Server or the request won't work.")])]),t._v(" "),e("p",[t._v("Now, when you mint a token, Groups in the "),e("code",[t._v("groupwhitelist")]),t._v(" that also have the user as a member are included in the Groups claim.")]),t._v(" "),e("h3",{attrs:{id:"request-an-access-token-that-contains-the-groups-claim"}},[t._v("Request an access token that contains the Groups claim "),e("a",{staticClass:"header-anchor header-link",attrs:{href:"#request-an-access-token-that-contains-the-groups-claim","aria-hidden":"true"}},[e("i",{staticClass:"fa fa-link"})])]),t._v(" "),e("p",[t._v("To obtain an access token with the configured Groups claim, send a request to the authorization endpoint for an access token that includes the Groups claim as a scope. For the specific steps on building the request URL, receiving the response, and decoding the JWT, see "),e("GuideLink",{attrs:{link:"../request-token-claim"}},[t._v("Request a token that contains the claim")]),t._v(".")],1),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("Note:")]),t._v(" The scopes that you need to include as query parameters are "),e("code",[t._v("openid")]),t._v(" and "),e("code",[t._v("groups")]),t._v(".")])]),t._v(" "),e("p",[t._v("The resulting URL looks something like this:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X GET\n"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://'),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${yourOktaDomain}")]),t._v("/oauth2/"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${authServerId}")]),t._v("/v1/authorize?client_id=xamplefa39J4jXdcCwWA\n&response_type=token\n&scope=openid%20groups\n&redirect_uri=https%3A%2F%2Fexample.com\n&nonce="),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${yourNonceValue}")]),t._v('\n&state=myState"')]),t._v("\n")])])]),e("blockquote",[e("p",[e("strong",[t._v("Note:")]),t._v(" The claim was configured to work with all scopes. If you specify only certain scopes to return the claim, you'll need to specify one of them in the request.")])]),t._v(" "),e("p",[t._v("The decoded JWT looks something like this:")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ver"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"jti"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"AT.wYGuabpyb15nr9fmvb5SQGezLYYlMfvRWvUpI8mqoOY"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"iss"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://${yourOktaDomain}/oauth2/ausocqn9bk00KaKbZ0h7"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"aud"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://${yourOktaDomain}"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"iat"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1574286687")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"exp"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1574290287")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cid"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0oaoesxtxmPf08QHk0h7"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uid"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"00uixa271s6x7qt8I0h7"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scp"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"groups"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"openid"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sub"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"joe.user@example.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"groups"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"IT"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("NextSectionLink")],1)}),[],!1,null,null,null);s.default=n.exports}}]);