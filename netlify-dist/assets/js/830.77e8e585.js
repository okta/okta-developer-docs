(window.webpackJsonp=window.webpackJsonp||[]).push([[830],{576:function(e,t,a){"use strict";a.r(t);var r=a(8),n=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("For machine-to-machine use cases where a backend service or a daemon has to call Okta APIs, use the "),a("router-link",{attrs:{to:"/docs/guides/implement-client-creds/"}},[e._v("Client Credentials grant flow")]),e._v(" with an OAuth Service app. The Client Credentials grant flow is the only valid grant type for an OAuth Service app.")],1),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("Note:")]),e._v(" Move on to the "),a("GuideLink",{attrs:{link:"../define-allowed-scopes"}},[e._v("next section")]),e._v(" if you don't need to use the Client Credentials grant flow.")],1)]),e._v(" "),a("p",[e._v("The following steps are required to configure the Client Credentials grant flow with an OAuth Service app:")]),e._v(" "),a("ol",[a("li",[e._v("Create the private key and then extract the public key from the private key to create a JSON Web Key Set (JWKS).")]),e._v(" "),a("li",[e._v("Create the app and register the public key with the app.")]),e._v(" "),a("li",[e._v("Sign the JWT with the private key.")])]),e._v(" "),a("h2",{attrs:{id:"create-a-public-private-key-pair"}},[e._v("Create a public/private key pair "),a("a",{staticClass:"header-anchor header-link",attrs:{href:"#create-a-public-private-key-pair","aria-hidden":"true"}},[a("i",{staticClass:"fa fa-link"})])]),e._v(" "),a("p",[e._v("The "),a("router-link",{attrs:{to:"/docs/reference/api/oidc/#jwt-with-private-key"}},[a("code",[e._v("private_key_jwt")])]),e._v(" client authentication method is the only supported method for OAuth Service apps that want to get access tokens with Okta scopes. The private key that you use to sign the JWT must have the corresponding public key registered in the "),a("router-link",{attrs:{to:"/docs/reference/api/oauth-clients/#json-web-key-set"}},[e._v("JWKSet")]),e._v(" of the OAuth Service app. So, we recommend generating the public/private key pair first before creating the OAuth Service app.")],1),e._v(" "),a("p",[e._v("You can use a tool such as this "),a("a",{attrs:{href:"https://mkjwk.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("JSON Web Key Generator"),a("OutboundLink")],1),e._v(" to generate an RSA 2048 JWKS key pair for testing.")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("Note:")]),e._v(" Use the JSON Web Key Generator link to generate JWKS key pairs for testing purposes only. For a production use case, use your own "),a("a",{attrs:{href:"https://github.com/mitreid-connect/mkjwk.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("internal instance"),a("OutboundLink")],1),e._v(" of the key pair generator.")])]),e._v(" "),a("p",[e._v("The JWKS should look something like this (the key is truncated for brevity):")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"keys"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n             "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"kty"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"RSA"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n             "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"e"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"AQAB"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n             "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"kid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"jwks1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n             "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"n"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"AJncrKuine49_CE.....RL0HU="')]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("h2",{attrs:{id:"create-a-service-app"}},[e._v("Create a Service app "),a("a",{staticClass:"header-anchor header-link",attrs:{href:"#create-a-service-app","aria-hidden":"true"}},[a("i",{staticClass:"fa fa-link"})])]),e._v(" "),a("p",[e._v("You can create an OAuth Service client app and register the public key with the Service app using the "),a("code",[e._v("/apps")]),e._v(" endpoint or the dynamic "),a("code",[e._v("/oauth/v1/clients")]),e._v(" registration endpoint.")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("/apps")]),e._v(": See the request example that shows how to create an OAuth 2.0 client application with "),a("code",[e._v("private_key_jwt")]),e._v(" in the "),a("router-link",{attrs:{to:"/docs/reference/api/apps/#add-oauth-2-0-client-application"}},[e._v("Add an OAuth 2.0 Client Application")]),e._v(" API reference section.")],1)]),e._v(" "),a("li",[a("p",[a("code",[e._v("/oauth/v1/clients")]),e._v(": See the "),a("strong",[e._v("Create a Service app with a JWKS")]),e._v(" example in the "),a("router-link",{attrs:{to:"/docs/reference/api/oauth-clients/#register-new-client"}},[e._v("Register New Client")]),e._v(" API reference section.")],1)])]),e._v(" "),a("h2",{attrs:{id:"sign-the-jwt"}},[e._v("Sign the JWT "),a("a",{staticClass:"header-anchor header-link",attrs:{href:"#sign-the-jwt","aria-hidden":"true"}},[a("i",{staticClass:"fa fa-link"})])]),e._v(" "),a("p",[e._v("You now need to sign the JWT with your private key for use in the request for a scoped access token. You can craft this "),a("code",[e._v("client_credentials")]),e._v(" JWT in several ways. See "),a("router-link",{attrs:{to:"/docs/guides/build-self-signed-jwt/java/jwt-with-private-key/"}},[e._v("Build a JWT with a private key")]),e._v(" for both a Java and a JavaScript example.")],1),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("Note:")]),e._v(" After the Service app has Okta-scoped grants, only an admin with Super Admin permissions can rotate the keys.")])]),e._v(" "),a("NextSectionLink")],1)}),[],!1,null,null,null);t.default=n.exports}}]);