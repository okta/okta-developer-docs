<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring Security SAML | Okta Developer</title>
    <meta name="description" content="Secure, scalable, and highly available authentication and user management for any app.">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.2.5/polyfill.min.js"></script>
  <script src="https://static.cloud.coveo.com/searchui/v2.7219/js/CoveoJsSearch.Lazy.min.js" defer="true"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/manifest.json">
  <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg">
  <meta name="msapplication-config" content="/favicon/browserconfig.xml">
  <link rel="stylesheet" href="https://developer.okta.com/sites/all/themes/developer/css/master.css">
  <link rel="stylesheet" href="https://coveo-oktaweb.pantheonsite.io/sites/all/modules/okta_coveo_search_developer/css/okta_coveo_search_developer.css?q49ktf">
  <meta http-equiv="XA-UA-Compatible" content="IE=edge">
  <script>
      // TypeKit
        (function(d) {
          var config = {
            kitId: 'jff5neq',
            scriptTimeout: 3000,
            async: true
          },
          h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/bwf-loadingb/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
        })(document);

      var isProduction = window.location.hostname === 'developer.okta.com';
      if (isProduction) {

        // START Google Tag Manager
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-KXMLV58');
        // END Google Tag Manager

      }
    </script>
    
    <link rel="preload" href="/assets/css/0.styles.15a2bd63.css" as="style"><link rel="preload" href="/assets/js/app.1df7935f.js" as="script"><link rel="preload" href="/assets/js/11.71506886.js" as="script"><link rel="preload" href="/assets/js/2.8712a879.js" as="script"><link rel="preload" href="/assets/js/4.57ec015f.js" as="script"><link rel="preload" href="/assets/js/10.75e07b2c.js" as="script"><link rel="preload" href="/assets/js/18.8e6368cd.js" as="script"><link rel="preload" href="/assets/js/16.d681cd2b.js" as="script"><link rel="preload" href="/assets/js/632.fbee043c.js" as="script"><link rel="preload" href="/assets/js/1.952b7ece.js" as="script"><link rel="preload" href="/assets/js/31.3153d314.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.15a2bd63.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="Page Page--docs-page"><div><header class="Header is-fixed"><div class="Wrap"><a href="https://developer.okta.com" class="Logo"><svg version="1.1" id="OktaLogo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 431.9 151.4" style="enable-background:new 0 0 431.9 151.4;" xml:space="preserve"><g><g><g><path d="M102.2,41.4c-21,0-38.1,17.1-38.1,38.1s17.1,38.1,38.1,38.1s38.1-17.1,38.1-38.1l0,0C140.3,58.5,123.2,41.4,102.2,41.4z M102.2,98.5c-10.5,0-19-8.5-19-19s8.5-19,19-19s19,8.5,19,19c0.1,10.5-8.4,19-18.9,19.1C102.3,98.6,102.2,98.6,102.2,98.5L102.2,98.5z"/><path d="M169.1,92.3c0-1.9,1.5-3.4,3.4-3.4c0.9,0,1.8,0.4,2.4,1c9.5,9.7,25.3,26.3,25.4,26.4c0.4,0.5,0.8,0.8,1.4,0.9l1.6,0.2h17.2c1.8,0,3.3-1.4,3.4-3.2c0-0.8-0.3-1.5-0.8-2.2l-28.6-29.2l-1.5-1.5c-3.2-3.9-2.9-5.4,0.8-9.3l22.6-25.1c1.1-1.4,0.8-3.5-0.6-4.6c-0.6-0.4-1.3-0.7-2-0.7h-17c-0.6,0.2-1.1,0.5-1.5,0.9L175,64.4c-1.3,1.4-3.4,1.5-4.8,0.2c-0.7-0.6-1.1-1.5-1.1-2.5V18.9c0-1.7-1.3-3-3-3c-0.1,0-0.2,0-0.3,0h-12.7c-2.2,0-3.3,1.5-3.3,2.8v95.8c0,2.2,1.8,2.8,3.3,2.8h12.7c1.7,0.1,3.2-1.2,3.3-2.9c0,0,0,0,0,0V92.3z"/><path d="M273,114l-1.4-12.8c-0.2-1.7-1.7-2.9-3.4-2.7c0,0,0,0-0.1,0l-2.9,0.2c-10.1,0-18.5-7.9-19-18c0-0.3,0-0.7,0-1V64.2c-0.1-2,1.5-3.6,3.5-3.7c0,0,0,0,0,0h17c1.7-0.1,3.1-1.5,3-3.2c0,0,0-0.1,0-0.1v-12c0-2.3-1.5-3.6-2.8-3.6h-17.1c-1.9,0.1-3.5-1.5-3.6-3.4c0,0,0,0,0,0V18.9c-0.1-1.7-1.5-3.1-3.2-3c0,0-0.1,0-0.1,0h-12.7c-1.6-0.1-3,1.1-3.1,2.7c0,0.1,0,0.1,0,0.2c0,0,0,61.7,0,62c0.5,21,17.9,37.6,38.9,37c1.4,0,2.9-0.2,4.3-0.3C272,117.2,273.2,115.7,273,114z"/></g><path d="M364.7,98c-10.8,0-12.4-3.8-12.4-18.3l0,0V44.8c0-1.8-1.4-3.2-3.2-3.2c0,0-0.1,0-0.1,0h-12.8c-1.8,0-3.2,1.4-3.3,3.2v1.6C314.6,36,291.3,42.5,281,60.8c-10.4,18.3-3.9,41.6,14.4,51.9c14,7.9,31.4,6.2,43.5-4.2c3.6,5.5,9.3,9.1,18.3,9.1c1.5,0,9.7,0.3,9.7-3.5v-13.6C367,99.2,366,98.1,364.7,98z M314.2,98.6c-10.5,0-19-8.5-19-19s8.5-19,19-19s19,8.5,19,19l0,0C333.2,90.1,324.7,98.6,314.2,98.6z"/></g><path d="M19.4,74c2.2-1.9,4.1-4.1,5.7-6.6c3.5-5.3,5.4-11.5,5.2-17.9V27c0-4.9,0.9-8.4,2.7-10.5c1.8-2.1,4.8-3,9.2-3h12.6c1.2,0,2.1-0.9,2.2-2.1l0,0V2.2C57,1,56,0,54.8,0c0,0,0,0,0,0H41.5c-7.8,0-12.9,2.1-18,7.6s-7.1,12.3-7.1,21.7v14.2c0,2.2-0.1,4-0.2,5.7v2.2c-0.5,3.2-1.8,6.2-3.6,8.9C9.4,64.7,5.1,70.9,0.9,74l0,0l-0.3,0.3l0,0l-0.2,0.3H0.2v0.3l0,0c-0.1,0.3-0.1,0.7,0,1l0,0v0.3h0.1l0.2,0.3l0,0l0.3,0.3l0,0c4.2,3.1,8.5,9.3,11.3,13.7c1.8,2.7,3.1,5.7,3.6,8.9v2.2c0.1,1.6,0.2,3.5,0.2,5.7v14.3c0,9.4,2.4,16.7,7.1,21.7s10.2,7.6,18,7.6h13.8c1.2,0,2.2-1,2.2-2.2V140l0,0c0-1.2-1-2.2-2.2-2.2H42.2c-4.4,0-7.5-1-9.2-3s-2.7-5.6-2.7-10.5v-22.4c0.2-6.4-1.7-12.6-5.2-17.9c-1.6-2.5-3.5-4.7-5.7-6.6l0,0c-0.9-0.7-1.1-2-0.4-2.9C19.2,74.3,19.3,74.2,19.4,74L19.4,74z"/><path d="M412.5,74c-2.2-1.9-4.1-4.1-5.7-6.6c-3.5-5.3-5.4-11.5-5.2-17.9V27c0-4.9-0.9-8.4-2.7-10.5s-4.8-3-9.2-3h-12.6c-1.2,0-2.2-1-2.2-2.2c0,0,0,0,0,0l0,0V2.2c0-1.2,1-2.2,2.2-2.2c0,0,0,0,0,0h13.4c7.8,0,12.9,2.1,18,7.6s7.1,12.3,7.1,21.7v14.2c0,2.2,0.1,4,0.2,5.7v2.2c0.5,3.2,1.8,6.2,3.6,8.9c2.8,4.5,7.1,10.7,11.3,13.7l0,0l0.3,0.3l0,0l0.2,0.3h0.1v0.3l0,0c0.1,0.3,0.1,0.7,0,1l0,0v0.3h-0.1l-0.2,0.3l0,0l-0.3,0.3l0,0c-4.2,3.1-8.5,9.3-11.3,13.7c-1.8,2.7-3.1,5.7-3.6,8.9v2.2c-0.1,1.6-0.2,3.5-0.2,5.7v14.3c0,9.4-2.4,16.7-7.1,21.7s-10.2,7.6-18,7.6h-13.4c-1.2,0-2.2-1-2.2-2.2c0,0,0,0,0,0V140l0,0c0-1.2,1-2.2,2.2-2.2l0,0h12.7c4.4,0,7.5-1,9.2-3s2.7-5.6,2.7-10.5v-22.4c-0.2-6.3,1.6-12.6,5.1-17.9c1.6-2.5,3.5-4.7,5.7-6.6l0,0c0.9-0.7,1.1-2,0.4-2.9C412.7,74.3,412.6,74.2,412.5,74L412.5,74z"/></g></svg></a> <nav class="Header-nav PrimaryNav"><ul class="menu"><li class="first expanded"><a href="/product/">Product</a> <ul class="menu"><li class="first"><a href="/product/">Overview</a> <!----></li><li><a href="/product/authentication/">Authentication</a> <!----></li><li><a href="/product/authorization/">Authorization</a> <!----></li><li><a href="/product/user-management/">User Management</a> <!----></li></ul></li><li><a href="/pricing/">Pricing</a> <!----></li><li><a href="/blog/">Blog</a> <!----></li><li class="expanded active"><a href="/docs/">Docs</a> <ul class="menu"><li class="first"><a href="/docs/">Get Started</a> <!----></li><li><a href="/docs/concepts/">Concepts</a> <!----></li><li><a href="/docs/guides/">Guides</a> <!----></li><li><a href="/docs/reference/">Reference</a> <!----></li></ul></li><li class="expanded"><a href="">Support</a> <ul class="menu"><li class="first"><a href="https://devforum.okta.com/">Okta Developer Forums</a> <!----></li><li><a href="mailto:developers@okta.com">developers@okta.com</a> <!----></li></ul></li></ul> <a href="#" class="PrimaryNav-toggle"><svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round" class="MenuIcon"><path d="M1,16 L19,16" stroke="#FFFFFF" stroke-width="2" class="MenuIcon-line1"></path> <path d="M1,4 L19,4" stroke="#FFFFFF" stroke-width="2" class="MenuIcon-line2"></path> <path d="M1,10 L19,10" stroke="#FFFFFF" stroke-width="2" class="MenuIcon-line3"></path> <path d="M1,10 L19,10" stroke="#FFFFFF" stroke-width="2" class="MenuIcon-line4"></path></g></svg> <svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="CloseIcon"><g id="ALl-Boards" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Desktop" transform="translate(-915.000000, -235.000000)" fill="#FFFFFF"><g id="Search-bar-Active" transform="translate(30.000000, 26.000000)"><polygon id="Icon/Cross" points="901 210.6 899.4 209 893 215.4 886.6 209 885 210.6 891.4 217 885 223.4 886.6 225 893 218.6 899.4 225 901 223.4 894.6 217"></polygon></g></g></g></svg></a> <div class="PrimaryNav-cta"><a target="_blank" rel="noopener noreferrer" href="https://login.okta.com/" class="Button--redOutline">Login</a> <a href="https://developer.okta.com/signup/" class="Button--red">Sign up</a></div> <a data-search-toggle class="SearchIcon"></a></nav></div></header> <div data-search-bar class="SearchBar"><div class="Wrap"><div data-pipeline="developer-okta-com" class="SearchBox" style="display: flex;"><div class="CoveoOmnibox"></div> <div class="CoveoSearchButton">Search</div> <div class="CoveoAnalytics"></div></div></div></div></div> <!----> <section class="PageContent DynamicSidebar" data-v-30b2e2cc><div class="Sidebar" data-v-705933f8 data-v-30b2e2cc><aside data-v-705933f8><h2 class="Sidebar-location Sidebar-toggle h6" data-v-705933f8>Navigation</h2> <div class="Sidebar-close Sidebar-toggle" data-v-705933f8></div> <div data-v-705933f8><div class="Sidebar-group" data-v-705933f8><h3 class="Sidebar-title" data-v-705933f8>Overview</h3> <ul class="Sidebar-nav" data-v-705933f8></ul></div><div class="Sidebar-group" data-v-705933f8><h3 class="Sidebar-title" data-v-705933f8>Mobile</h3> <ul class="Sidebar-nav" data-v-705933f8><li data-v-705933f8><a href="/code/android/" data-v-705933f8>Android</a> <!----></li><li data-v-705933f8><a href="/code/ios/" data-v-705933f8>iOS</a> <!----></li><li data-v-705933f8><a href="/code/react-native/" data-v-705933f8>React Native</a> <!----></li></ul></div><div class="Sidebar-group" data-v-705933f8><h3 class="Sidebar-title" data-v-705933f8>Front End</h3> <ul class="Sidebar-nav" data-v-705933f8><li data-v-705933f8><a href="/code/angular/" data-v-705933f8>Angular</a> <!----></li><li data-v-705933f8><a href="/code/javascript/" data-v-705933f8>Javascript</a> <!----></li><li data-v-705933f8><a href="/code/react/" data-v-705933f8>React</a> <!----></li><li data-v-705933f8><a href="/code/vue/" data-v-705933f8>Vue</a> <!----></li></ul></div><div class="Sidebar-group" data-v-705933f8><h3 class="Sidebar-title" data-v-705933f8>Back End</h3> <ul class="Sidebar-nav" data-v-705933f8><li data-v-705933f8><a href="/code/dotnet/aspnetcore/" data-v-705933f8>.Net</a> <!----></li><li data-v-705933f8><a href="/code/go/" data-v-705933f8>Go</a> <!----></li><li class="is-active" data-v-705933f8><a href="/code/java/" data-v-705933f8>Java</a> <!----></li><li data-v-705933f8><a href="/code/nodejs/" data-v-705933f8>Node.js</a> <!----></li><li data-v-705933f8><a href="/code/php/" data-v-705933f8>PHP</a> <!----></li><li data-v-705933f8><a href="/code/python/" data-v-705933f8>Python</a> <!----></li><li data-v-705933f8><a href="/code/rest/" data-v-705933f8>REST</a> <!----></li></ul></div></div></aside></div> <div class="PageContent-main language-content NoPaddingTop" data-v-30b2e2cc><a id="edit-link" href="https://github.com/okta/okta-developer-docs/edit/master/packages/@okta/vuepress-site/code/java/spring_security_saml//index.md" target="_blank" rel="noopener noreferrer" data-proofer-ignore="" data-v-30b2e2cc>Edit Page</a> <nav aria-label="breadcrumb" class="breadcrumb-nav" data-v-30b2e2cc><ol class="breadcrumb Wrap" style="width:80%;"><li class="breadcrumb-item"><a href="/docs/">DOCS</a></li></ol></nav> <div class="content__default" data-v-30b2e2cc><h1><i class="icon-48 docsPage code-spring"></i> Overview</h1> <p>This guide describes how to use Spring Security SAML to add support for Okta (via SAML) to Java applications that use the Spring framework. In this guide, you learn how to install and configure an Okta SAML application.</p> <p>This guide assumes that you are familiar with the basics of Java software development: editing text files, using the command line, and running Tomcat, Maven, or Gradle.</p> <p>If you're already familiar with Okta and Spring, you can skip to the <strong>Configure Spring Security SAML to work with Okta</strong> section.</p> <blockquote><p><strong>Note:</strong> The Spring Security SAML toolkit that you download isn't an Okta toolkit and isn't supported by Okta.</p></blockquote> <h2 id="requirements">Requirements <a href="#requirements" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h2> <p>Please make sure that the following are installed before starting installation:</p> <p><a href="http://www.oracle.com/technetwork/java/javase/overview/index.html" target="_blank" rel="noopener noreferrer">Java 1.6+ SDK<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Check using the following command:</p> <p><code>java -version</code></p> <p><a href="https://maven.apache.org" target="_blank" rel="noopener noreferrer">Apache Maven<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Check using the following command:</p> <p><code>mvn --version</code></p> <h2 id="installation">Installation <a href="#installation" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h2> <p>This section covers what you need to do to install and configure Tomcat from scratch on Mac OS X. If you already have Tomcat on your system, you can skip to the <strong>Download the Spring SAML Extension</strong> step.</p> <p>How to install the Spring Security SAML sample Okta application on Mac OS X:</p> <p><strong>1. Install Tomcat</strong></p> <p>If it's not already installed, install Tomcat with Homebrew using <a href="https://github.com/mhulse/mhulse.github.io/wiki/Installing-Apache-Tomcat-using-Homebrew-on-OS-X-Yosemite" target="_blank" rel="noopener noreferrer">these directions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p><strong>2. Download the Spring SAML Extension</strong></p> <p>Use <code>git clone</code> to clone the extention locally:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/spring-projects/spring-security-saml.git
</code></pre></div><p><strong>3. Download the sample application</strong></p> <p>Use <code>git clone</code> to clone this repository locally:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/nshobayo/okta-SpringSAML.git
</code></pre></div><p>Use this command to copy the sample Okta application into the Extension's <code>src</code> folder:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">rm</span> -rf spring-security-saml/sample/src/main
<span class="token function">cp</span> -r okta-SpringSAML/src/main spring-security-saml/sample/src
</code></pre></div><p><strong>4. Compile</strong></p> <p>Make sure that your working directory is the <code>sample</code> subdirectory of the <code>spring-security-saml</code> directory:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> spring-security-saml/sample
</code></pre></div><p>To compile:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">..</span>/gradlew build <span class="token function">install</span>
</code></pre></div><p>This task compiles, tests, and assembles the code into a <code>.war</code> file. A successful build should look something like this: <img src="/img/spring-security-saml-build.png" alt="successful build" title="successful build"></p> <p>You can find your compiled WAR archive file, <code>spring-security-SAML2-sample.war</code>, in the <code>build/libs/</code> directory.</p> <p><strong>5. Deploy</strong></p> <p>Assuming that your current directory is <code>spring-security-saml/sample</code>, use the following command to copy the compiled <code>spring-security-SAML2-sample.war</code> file to the Tomcat directory that you set up in step one:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cp</span> build/libs/spring-security-SAML2-sample.war /Library/Tomcat/webapps/
</code></pre></div><p><strong>6. Start Tomcat</strong></p> <p>Use the following command to start Tomcat:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>/Library/Tomcat/bin/startup.sh
</code></pre></div><p><strong>7. Start the Application</strong></p> <p>Load the Spring SAML application by opening this link: <code>http://localhost:8080/spring-security-saml2-sample/saml/discovery?entityID=http%3A%2F%2Flocalhost%3A8080%2Fspring-security-saml2-sample%2Fsaml%2Fmetadata&amp;returnIDParam=idp</code></p> <blockquote><p><strong>Note:</strong> Links in the app aren't functional yet because we haven't configured any IDPs. Full app functionality is completed after the <strong>Configure Spring Security SAML to work with Okta</strong> section.</p></blockquote> <p>Here's what it should look like: <img src="/img/spring-security-saml-intro.png" alt="App Running" title="App Running"></p> <h2 id="configure-okta-to-work-with-spring-security-saml">Configure Okta to work with Spring Security SAML <a href="#configure-okta-to-work-with-spring-security-saml" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h2> <p>Before we can configure Spring Security SAML, we need to set up an application in Okta that connects to Spring Security SAML.</p> <p>In SAML terminology, what we are doing here is configuring Okta, which is our SAML Identity Provider (SAML IdP), with the details of Spring Security SAML, which is the new SAML Service Provider (SAML SP) that you create next.</p> <p>Here is how to configure Okta:</p> <p><strong>1.</strong> Sign in to your Okta organization as a user with administrative privileges. If you don't have an Okta organization, you can <a href="https://developer.okta.com/signup/" target="_blank" rel="noopener noreferrer">create a free Okta Developer Edition organization<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p><strong>2.</strong> Click <strong>Admin</strong>, and then <strong>Add Applications</strong>.</p> <p><strong>3.</strong> Click <strong>Create New App</strong>.</p> <p><strong>4.</strong> In the dialog box that appears, select <strong>SAML 2.0</strong>, and then click <strong>Create</strong>. <img src="/img/okta-admin-ui-create-new-application-integration.png" alt="Create a New Application Integration" title="Create a New Application Integration"></p> <p><strong>5.</strong> In the <strong>General Settings</strong> section, enter <strong>Spring Security SAML</strong> in the <strong>Appname</strong> box, and then click <strong>Next</strong>. <img src="/img/spring-security-saml-okta-general-settings.png" alt="General Settings" title="General Settings"></p> <p><strong>6.</strong> In the <strong>Configure SAML</strong> section, paste the following URL into the <strong>Single sign on URL</strong> box:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>http://localhost:8080/spring-security-saml2-sample/saml/SSO
</code></pre></div><p><strong>7.</strong> Then paste the following URL into the <strong>Audience URI (SP Entity ID)</strong> box:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>http://localhost:8080/spring-security-saml2-sample/saml/metadata
</code></pre></div><p>You can add user attributes sent in each SAML assertion under <strong>Attribute Statements</strong> during this step, if desired. Theses attribute values can be derived and used from the SP side.</p> <p><strong>8.</strong> Click <strong>Next</strong>. <img src="/img/spring-security-saml-settings.png" alt="SAML Settings" title="SAML Settings"></p> <p><strong>9.</strong> In the <strong>Feedback</strong> section, select the <strong>This is an internal application that we created</strong> check box and click <strong>Finish</strong>. <img src="/img/okta-admin-ui-new-application-step-3-feedback.png" alt="App type" title="App type"></p> <pre><code>The **Sign On** section of your newly created Spring Security SAML application appears.
</code></pre> <p><strong>10.</strong> Copy the <strong>Identity Provider metadata</strong> link by right-clicking the <strong>Identity Provider metadata</strong> link and selecting <strong>Copy</strong>. You will need this link later. <img src="/img/okta-admin-ui-identity-provider-metadata-link.png" alt="Sign on methods" title="Sign on methods"></p> <p><strong>11.</strong> Right-click the <strong>People</strong> section of the Spring Security SAML application and select <strong>Open Link In New Tab</strong> (so that you can come back to the <strong>Sign On</strong> section later).</p> <p><strong>12.</strong> In the new tab that opens, click <strong>Assign Application</strong>. <img src="/img/spring-security-saml-okta-assign-people-to-application.png" alt="Assign Application" title="Assign Application"></p> <p><strong>13.</strong> The <strong>Assign Spring Security SAML to up to 500 people</strong> dialog box appears. Enter your username into the search box, select the check box next to your username, and then click <strong>Next</strong>. <img src="/img/okta-admin-ui-confirm-assignments.png" alt="People search box" title="People search box"></p> <p><strong>14.</strong> You are prompted to enter user-specific attributes. Click <strong>Confirm Assignments</strong> to keep the defaults. <img src="/img/spring-security-saml-okta-confirm-assignments.png" alt="Enter user attributes" title="Enter user attributes"></p> <h2 id="configure-spring-security-saml-to-work-with-okta">Configure Spring Security SAML to work with Okta <a href="#configure-spring-security-saml-to-work-with-okta" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h2> <p>Now that you have configured a Spring Security SAML application, you are ready to configure Spring Security SAML to work with Okta. In this section we use the Identity Provider metadata link that you copied in the last section to configure Spring Security SAML. Once you've completed these steps, you'll have a working example of connecting Okta to Spring.</p> <p><strong>1.</strong> Open the <code>securityContext.xml</code> file in your favorite text editor. If you followed the instructions in the last section for &quot;Installing the Spring Security SAML sample application&quot; on Mac OS X, this file is located at <code>/Library/Tomcat/webapps/spring-security-saml2-sample/WEB-INF/securityContext.xml</code>. (Normally, 	you would do this step <em>before</em> running Maven or Gradle to create the WAR file that you deploy to Tomcat. In this case, I'm having you edit the file in the 	Tomcat path directly, since it's easier to make small changes and test them this way).</p> <p><strong>2.</strong> Once you've opened the <code>securityContext.xml</code> file, add the following XML to the end of the tag identified by this CSS selector syntax:</p> <p><code>#metadata &gt; constructor-arg &gt; list</code></p> <div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>org.opensaml.saml2.metadata.provider.HTTPMetadataProvider<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	  <span class="token comment">&lt;!-- URL containing the metadata --&gt;</span>
	  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- This URL should look something like this: https://${yourOktaDomain}/app/abc0defghijK1lmN23o4/sso/saml/metadata --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>java.lang.String<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{metadata-url}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
	  <span class="token comment">&lt;!-- Timeout for metadata loading in ms --&gt;</span>
	  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
	  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>parserPool<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>parserPool<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>3.</strong> Make sure to replace the contents of <code>{metdata-url}</code> with the link that you copied in step 11 of the <a href="http://localhost:8080/code/java/spring_security_saml/#configure-okta-to-work-with-spring-security-saml" target="_blank" rel="noopener noreferrer">Configure Okta to work with Spring Security SAML<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> section.</p> <p><strong>4.</strong> Save the <code>securityContext.xml</code> file, then restart Tomcat. If you are using Mac OS X, you can restart Tomcat using the following commands:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>	/Library/Tomcat/bin/shutdown.sh
	/Library/Tomcat/bin/startup.sh
</code></pre></div><h2 id="test-the-saml-integration">Test the SAML integration <a href="#test-the-saml-integration" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h2> <p>Now that you've set up an application in Okta and configured the Spring Security SAML example application to use that application, you're ready
to test it out.</p> <p>There are two ways to test a SAML application: Starting from the Spring application (&quot;SP initiated&quot;) and starting from Okta (&quot;IdP initiated&quot;).
You will be testing both methods. In both cases, you will know if the test worked when you see a screen that looks like the following: <img src="/img/spring-security-saml-assert.png" alt="Authenticated user" title="Authenticated user"></p> <p><strong>1.</strong> Sign in from the Spring Security SAML sample application (This is known as an &quot;SP initiated&quot; sign in).</p> <p>-Open the sample application in your browser:</p> <p><code>http://localhost:8080/spring-security-saml2-sample</code></p> <p>-Select the Okta IdP from the list. It is a URL that starts with: <code>http://www.okta.com/</code>.</p> <p>-Click <strong>Start single sign-on</strong>. <img src="/img/spring-security-saml-selection.png" alt="Start single sign-on" title="Start single sign-on"></p> <p><strong>2.</strong> Sign in from Okta (This is known as an &quot;IdP initiated&quot; sign in).</p> <p>-Sign in to your Okta organization.</p> <p>-Click the button for the application that you created in the <strong>Configure Okta to work with Spring Security SAML</strong> section. <img src="/img/spring-security-saml-okta-chiclet.png" alt="Spring Security SAML" title="Spring Security SAML"></p> <p>If you're able to access the Authenticated User page using both of these methods, then you're done. Congratulations on getting Okta working with Spring!</p> <h2 id="next-steps">Next Steps <a href="#next-steps" aria-hidden="true" class="header-anchor header-link"><i class="fa fa-link"></i></a></h2> <p>At this point, you should be familiar with setting up SAML-enabled applications to work with an Okta organization and how to configure Spring Security SAML to work with Okta.</p> <p>After you have Okta working with the example Spring Security SAML application, the next step is to take the example code and move it to your production application. The specifics of how this works is different depending on how your application is set up. Pay special attention to the <code>securityContext.xml</code>, which allows you to add more IDPs to the app as well as control page redirects. Before any changes are made to the <code>securityContext.xml</code> file, you should consider reading the <a href="http://docs.spring.io/spring-security-saml/docs/1.0.x/reference/html/" target="_blank" rel="noopener noreferrer">Spring Security SAML reference documents<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that provide a detailed overview of all the components and features of Spring Security SAML.</p> <p>If you want to learn more about configuring SAML and what to consider when writing a SAML application, see the in-depth Okta <a href="https://www.okta.com/integrate/documentation/saml/" target="_blank" rel="noopener noreferrer">SAML guidance<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> documentation, which is great place to learn more.</p></div></div> <!----></section> <footer class="Footer"><div class="Wrap"><div class="Row"><div class="Column--3 Column--medium-6 Column--xSmall-12"><a href="https://www.okta.com/" target="_blank" rel="noopener noreferrer"><div class="Logo"><img src="https://developer.okta.com/sites/all/themes/developer/images/logo-footer.png" alt="Okta"></div> <p>Visit okta.com</p></a></div> <div class="Column--3 Column--medium-12 Column--xSmall-12"><h4>Social</h4> <ul class="Footer-links"><li class="first"><a href="http://github.com/oktadeveloper" target="_blank" class="Footer-links--github">GitHub</a> <!----></li><li><a href="http://twitter.com/OktaDev" target="_blank" class="Footer-links--twitter">Twitter</a> <!----></li><li><a href="https://devforum.okta.com/" target="_blank" class="Footer-links--forum">Forum</a> <!----></li><li><a href="http://feeds.feedburner.com/OktaBlog" target="_blank" class="Footer-links--rss">RSS Blog</a> <!----></li><li><a href="https://www.youtube.com/channel/UC5AMiWqFVFxF1q9Ya1FuZ_Q/featured" target="_blank" class="Footer-links--youtube">YouTube</a> <!----></li></ul></div><div class="Column--3 Column--medium-12 Column--xSmall-12"><h4>More Info</h4> <ul class="Footer-links"><li class="first"><a href="https://developer.okta.com/integrate-with-okta/">Integrate With Okta</a> <!----></li><li><a href="https://developer.okta.com/blog/">Blog</a> <!----></li><li><a href="https://developer.okta.com/docs/release-notes/">Release Notes</a> <!----></li><li><a href="https://developer.okta.com/3rd_party_notices/">3rd Party Notices</a> <!----></li><li><a href="https://toolkit.okta.com/">Community Toolkit</a> <!----></li></ul></div><div class="Column--3 Column--medium-12 Column--xSmall-12"><h4>Contact & Legal</h4> <ul class="Footer-links"><li class="first"><a href="https://developer.okta.com/contact/">Contact Our Team</a> <!----></li><li><a href="https://developer.okta.com/contact-sales-enterprise/">Contact Sales</a> <!----></li><li><a href="mailto:developers@okta.com">Contact Support</a> <!----></li><li><a href="https://developer.okta.com/terms/">Terms &amp; Conditions</a> <!----></li><li><a href="https://developer.okta.com/privacy/">Privacy Policy</a> <!----></li></ul></div></div></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1df7935f.js" defer></script><script src="/assets/js/11.71506886.js" defer></script><script src="/assets/js/2.8712a879.js" defer></script><script src="/assets/js/4.57ec015f.js" defer></script><script src="/assets/js/10.75e07b2c.js" defer></script><script src="/assets/js/18.8e6368cd.js" defer></script><script src="/assets/js/16.d681cd2b.js" defer></script><script src="/assets/js/632.fbee043c.js" defer></script><script src="/assets/js/1.952b7ece.js" defer></script><script src="/assets/js/31.3153d314.js" defer></script>
  </body>
</html>
