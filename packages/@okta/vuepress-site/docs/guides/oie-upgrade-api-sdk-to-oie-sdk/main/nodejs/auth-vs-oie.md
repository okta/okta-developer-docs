
At a high level, the classic authentication flow for the Classic Engine Authentication SDK methods and their backend API calls function similarly to the new Identity Engine SDK methods: both versions call Okta, receive a transaction object, and ultimately receive tokens after a successful authentication.

The Classic Engine authentication flow returns a transaction object that has the ability to proceed in the process. You call a method on the transaction object based on the status, for example `authClient.signInWithCredentials` to authenticate the user. The Identity Engine SDK, however, uses a recursive process, and you call the same method again based on the information returned in the transaction object. The Identity Engine SDK uses the `nextStep` property on the transaction object to provide a hint at the required information. For the basic authentication example, the Identity Engine SDK calls `authClient.idx.authenticate` again with information as part of the call, the user’s email address, authenticator, and so on to complete the flow and return a success state.

Another difference between Classic Engine Authentication SDK and Identity Engine SDK methods is how you receive tokens after a successful authentication. For the Classic Engine Authentication SDK, the method `setCookieAndRedirect`, which is deprecated in Identity Engine, makes a call to get the tokens. In the Identity Engine SDK, after receiving a success state, the tokens are included with the transaction object. There’s no separate call to get the tokens.

For further information on the Classic Engine Authentication SDK and the Identity Engine SDK, see the following documentation at the `okta-auth-js` repository:

* [Okta Authentication API (authn)](https://github.com/okta/okta-auth-js/blob/master/docs/authn.md)
* [Okta Identity Engine API (IDX)](https://github.com/okta/okta-auth-js/blob/master/docs/idx.md)
* [Migrating from authn to IDX](https://github.com/okta/okta-auth-js/blob/master/docs/migrate-from-authn-to-idx.md)

The following table is a high-level mapping of the typical classic API requests and Classic Engine Authentication SDK methods to Identity Engine SDK methods. Since there are a variety of combinations to achieve classic authentication flows, the mapping list isn't exhaustive.

| Okta API endpoints      | Classic Engine SDK methods      |   Identity Engine SDK methods      |   Description |
| ----------------------- | ------------------------------ | -----------------------------------| ------------- |
| [/api/v1/authn](/docs/reference/api/authn/)<br>[/api/v1/sessions](/docs/reference/api/sessions/#create-session-with-a-session-token)| [signInWithCredentials](https://github.com/okta/okta-auth-js/blob/master/docs/authn.md#signinwithcredentialsoptions) [session.setCookieAndRedirect](https://github.com/okta/okta-auth-js/blob/master/docs/authn.md#sessionsetcookieandredirectsessiontoken-redirecturi) | [idx.authenticate](https://github.com/okta/okta-auth-js/blob/master/docs/idx.md#idxauthenticate)| Authenticate a user with username and password credentials. See [Map basic sign-in code to the Identity Engine SDK](#map-basic-sign-in-code-to-the-identity-engine-sdk).|
| [/api/v1/authn](/docs/reference/api/authn/)<br>[/api/v1/factors](/docs/reference/api/factors/#get-started-with-the-factors-api)| [signInWithCredentials](https://github.com/okta/okta-auth-js/blob/master/docs/authn.md#signinwithcredentialsoptions) [transaction.factors](https://github.com/okta/okta-auth-js/blob/master/docs/authn.md#mfa_required) [transaction.verify](https://github.com/okta/okta-auth-js/blob/master/docs/authn.md#mfa_challenge) [session.setCookieAndRedirect](https://github.com/okta/okta-auth-js/blob/master/docs/authn.md#sessionsetcookieandredirectsessiontoken-redirecturi) | [idx.authenticate](https://github.com/okta/okta-auth-js/blob/master/docs/idx.md#idxauthenticate)| Sign in a user using multifactor authentication, verify the factor and challenge. See [Map MFA code to the Identity Engine SDK](#map-mfa-code-to-the-identity-engine-sdk).|
| [/api/v1/authn/recovery/password](/docs/reference/api/authn/#forgot-password)<br>[/api/v1/authn/recovery/token](/docs/reference/api/authn/#verify-recovery-token) [/api/v1/authn/credentials/reset_password](/docs/reference/api/authn/#reset-password) | [forgotPassword](https://github.com/okta/okta-auth-js/blob/master/docs/authn.md#forgotpasswordoptions)<br>[transaction.verify](https://github.com/okta/okta-auth-js/blob/master/docs/authn.md#mfa_challenge)<br>[transaction.resetPassword](https://github.com/okta/okta-auth-js/blob/master/docs/authn.md#resetpasswordoptions)<br>[session.setCookieAndRedirect](https://github.com/okta/okta-auth-js/blob/master/docs/authn.md#sessionsetcookieandredirectsessiontoken-redirecturi) | [idx.recoverPassword](https://github.com/okta/okta-auth-js/blob/master/docs/idx.md#idxrecoverpassword)| Password recovery flow, including a factor challenge and password reset. See [Map password recovery code to the Identity Engine SDK](#map-password-recovery-code-to-the-identity-engine-sdk).|
| [/api/v1/authn/cancel](https://developer.okta.com/docs/reference/api/authn/#cancel-transaction) | [transaction.cancel](https://github.com/okta/okta-auth-js/blob/master/docs/authn.md#cancel)| [idx.cancel](https://github.com/okta/okta-auth-js/blob/master/docs/idx.md#idxcancel)| Cancels the Auth flow.|
| [/v1/logout](https://developer.okta.com/docs/reference/api/oidc/#logout)| [getSignOutRedirectUrl](https://github.com/okta/okta-auth-js/blob/master/samples/generated/express-embedded-auth-with-sdk/web-server/routes/logout.js) [revokeAccessToken](https://github.com/okta/okta-auth-js/blob/master/samples/generated/express-embedded-auth-with-sdk/web-server/routes/logout.js) | n/a | Sign out. See [User sign out (local app)](/docs/guides/oie-embedded-sdk-use-case-basic-sign-out/nodejs/main/).|
